/**
 * @license ng-alain(cipchk@qq.com) v11.6.0
 * (c) 2020 cipchk https://ng-alain.com/
 * License: MIT
 */
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@angular/core"),require("@delon/util/config"),require("ng-zorro-antd/core/tree")):"function"==typeof define&&define.amd?define("@delon/util/array",["exports","@angular/core","@delon/util/config","ng-zorro-antd/core/tree"],r):r(((e="undefined"!=typeof globalThis?globalThis:e||self).delon=e.delon||{},e.delon.util=e.delon.util||{},e.delon.util.array={}),e.ng.core,e.delon.util.config,e.tree)}(this,(function(e,r,a,t){"use strict";function n(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var t=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(r,a,t.get?t:{enumerable:!0,get:function(){return e[a]}})}})),r.default=e,Object.freeze(r)}var i=n(r),o=n(a);Object.create;function c(e){var r="function"==typeof Symbol&&Symbol.iterator,a=r&&e[r],t=0;if(a)return a.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}Object.create;var l=function(){function e(e){this.c=e.merge("utilArray",{deepMapName:"deep",parentMapName:"parent",idMapName:"id",parentIdMapName:"parent_id",childrenMapName:"children",titleMapName:"title",checkedMapname:"checked",selectedMapname:"selected",expandedMapname:"expanded",disabledMapname:"disabled"})}return e.prototype.treeToArr=function(e,r){var a=Object.assign({deepMapName:this.c.deepMapName,parentMapName:this.c.parentMapName,childrenMapName:this.c.childrenMapName,clearChildren:!0,cb:null},r),t=[],n=function(e,r,i){var o,l;void 0===i&&(i=0);try{for(var p=c(e),d=p.next();!d.done;d=p.next()){var u=d.value;u[a.deepMapName]=i,u[a.parentMapName]=r,a.cb&&a.cb(u,r,i),t.push(u);var s=u[a.childrenMapName];null!=s&&Array.isArray(s)&&s.length>0&&n(s,u,i+1),a.clearChildren&&delete u[a.childrenMapName]}}catch(e){o={error:e}}finally{try{d&&!d.done&&(l=p.return)&&l.call(p)}finally{if(o)throw o.error}}};return n(e,null),t},e.prototype.arrToTree=function(e,r){var a,t;if(!Array.isArray(e)||0===e.length)return[];var n=Object.assign({idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,childrenMapName:this.c.childrenMapName,cb:null},r),i=[],o={},l=n.rootParentIdValue,p=e;if(!l){var d=p.map((function(e){return e[n.parentIdMapName]})),u=d.findIndex((function(e){return null==e}));l=-1!==u?d[u]:d.sort()[0]}try{for(var s=c(p),f=s.next();!f.done;f=s.next()){var h=f.value,m=h[n.idMapName],y=h[n.parentIdMapName];o[m]=o[m]||[],h[n.childrenMapName]=o[m],n.cb&&n.cb(h),y!==l?(o[y]=o[y]||[],o[y].push(h)):i.push(h)}}catch(e){a={error:e}}finally{try{f&&!f.done&&(t=s.return)&&t.call(s)}finally{if(a)throw a.error}}return i},e.prototype.arrToTreeNode=function(e,r){var a=Object.assign({idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,titleMapName:this.c.titleMapName,isLeafMapName:"isLeaf",checkedMapname:this.c.checkedMapname,selectedMapname:this.c.selectedMapname,expandedMapname:this.c.expandedMapname,disabledMapname:this.c.disabledMapname,cb:null},r),n=this.arrToTree(e,{idMapName:a.idMapName,parentIdMapName:a.parentIdMapName,childrenMapName:"children"});return this.visitTree(n,(function(e,r,t){e.key=e[a.idMapName],e.title=e[a.titleMapName],e.checked=e[a.checkedMapname],e.selected=e[a.selectedMapname],e.expanded=e[a.expandedMapname],e.disabled=e[a.disabledMapname],null==e[a.isLeafMapName]?e.isLeaf=0===e.children.length:e.isLeaf=e[a.isLeafMapName],a.cb&&a.cb(e,r,t)})),n.map((function(e){return new t.NzTreeNode(e)}))},e.prototype.visitTree=function(e,r,a){a=Object.assign({childrenMapName:this.c.childrenMapName},a);var t=function(e,n,i){var o,l;try{for(var p=c(e),d=p.next();!d.done;d=p.next()){var u=d.value;r(u,n,i);var s=u[a.childrenMapName];Array.isArray(s)&&s.length>0&&t(s,u,i+1)}}catch(e){o={error:e}}finally{try{d&&!d.done&&(l=p.return)&&l.call(p)}finally{if(o)throw o.error}}};t(e,null,1)},e.prototype.findTree=function(e,r,a){var t;return this.visitTree(e,(function(e){void 0===t&&r(e)&&(t=e)}),a),t},e.prototype.getKeysByTreeNode=function(e,r){var a=Object.assign({includeHalfChecked:!0},r),t=[];return this.visitTree(e,(function(e,r,n){(e.isChecked||a.includeHalfChecked&&e.isHalfChecked)&&t.push(a.cb?a.cb(e,r,n):a.keyMapName?e.origin[a.keyMapName]:e.key)})),t},e.prototype.baseFlat=function(e,r,a){void 0===a&&(a=[]);for(var t=-1;++t<e.length;){var n=e[t];if(r>0&&Array.isArray(n))if(r>1)this.baseFlat(n,r-1,a);else for(var i=-1,o=a.length;++i<n.length;)a[o+i]=n[i];else a[a.length]=n}return a},e.prototype.flat=function(e,r){return void 0===r&&(r=1/0),Array.isArray(e)?this.baseFlat(e,r):e},e.prototype.groupBy=function(e,r){return Array.isArray(e)?e.reduce((function(e,a){var t=r(a);return Object.prototype.hasOwnProperty.call(e,t)?e[t].push(a):e[t]=[a],e}),{}):{}},e.prototype.uniq=function(e,r){return Array.from(e.reduce((function(e,a){var t=r?"string"==typeof r?a[r]:r(a):a;return e.has(t)||e.set(t,a),e}),new Map).values())},e}();l.ɵprov=i.ɵɵdefineInjectable({factory:function(){return new l(i.ɵɵinject(o.AlainConfigService))},token:l,providedIn:"root"}),l.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],l.ctorParameters=function(){return[{type:a.AlainConfigService}]},e.ArrayService=l,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=delon-util-array.umd.min.js.map